<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Title}}</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <h1>ğŸµ Groupie Tracker ğŸµ</h1>
    
    <!-- Barre de recherche simple -->
    <div class="search-bar">
        <input type="text" id="searchInput" placeholder="Rechercher un artiste..." onkeyup="filterArtists()">
    </div>
    
    <!-- Barre de recherche avancÃ©e - Style intÃ©grÃ© -->
    <div class="advanced-search">
        <h3>ğŸ” Recherche avancÃ©e</h3>
        
        <div class="filter-group">
            <div class="filter-item">
                <label>ğŸ‘¥ Membres</label>
                <select id="membersFilter" onchange="filterArtists()" class="filter-select">
                    <option value="">Tous</option>
                    <option value="1">ğŸ¤ Solo</option>
                    <option value="2">ğŸ‘¥ Duo</option>
                    <option value="3">ğŸ¸ Trio</option>
                    <option value="4">ğŸ¹ Quatuor</option>
                    <option value="5">ğŸµ 5+</option>
                </select>
            </div>
            
            <div class="filter-item">
                <label>ğŸ“… PÃ©riode</label>
                <select id="yearFilter" onchange="filterArtists()" class="filter-select">
                    <option value="">Toutes</option>
                    <option value="1960">ğŸ“» 60's</option>
                    <option value="1970">ğŸ•º 70's</option>
                    <option value="1980">ğŸ¸ 80's</option>
                    <option value="1990">ğŸ“¼ 90's</option>
                    <option value="2000">ğŸ’» 2000+</option>
                </select>
            </div>
        </div>
    </div>
    
    <p>Clique sur un artiste pour voir ses dÃ©tails !</p>
    
    <div class="artists-grid" id="artistsGrid">
        {{range $index, $artist := .Artists}}
        <div class="artist-card" 
             data-name="{{lower $artist.Name}}"
             data-members="{{len $artist.Members}}"
             data-year="{{$artist.CreationDate}}">
            <a href="/artist/{{$index}}">
                <img src="{{$artist.Image}}" alt="{{$artist.Name}}" onerror="this.src='https://via.placeholder.com/200x200?text=Pas+de+photo'">
                <h3>{{$artist.Name}}</h3>
                <p>CrÃ©Ã© en: {{$artist.CreationDate}}</p>
                <p>Membres: {{len $artist.Members}}</p>
            </a>
        </div>
        {{end}}
    </div>

    <script>
    function filterArtists() {
        const searchInput = document.getElementById('searchInput').value.toLowerCase();
        const membersFilter = document.getElementById('membersFilter').value;
        const yearFilter = document.getElementById('yearFilter').value;
        const cards = document.getElementsByClassName('artist-card');
        
        for (let card of cards) {
            const name = card.getAttribute('data-name');
            const members = card.getAttribute('data-members');
            const year = card.getAttribute('data-year');
            
            // VÃ©rifie tous les critÃ¨res
            const matchSearch = name.includes(searchInput);
            const matchMembers = !membersFilter || members === membersFilter;
            const matchYear = !yearFilter || checkYearRange(year, yearFilter);
            
            // Affiche uniquement si TOUT correspond
            if (matchSearch && matchMembers && matchYear) {
                card.style.display = 'block';
            } else {
                card.style.display = 'none';
            }
        }
    }
    
    function checkYearRange(year, filter) {
        if (filter === '2000') return parseInt(year) >= 2000;
        const start = parseInt(filter);
        const end = start + 9;
        return parseInt(year) >= start && parseInt(year) <= end;
    }
    </script>
</body>
</html>